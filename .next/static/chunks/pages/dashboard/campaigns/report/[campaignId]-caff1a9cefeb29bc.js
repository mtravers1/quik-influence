(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1727],{93162:function(e,t,n){var r,o,a;o=[],void 0===(a="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,n){var l=i.URL||i.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?a(s):o(s.href)?r(e,t,n):a(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){a(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(o(e))r(e,n,i);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){a(l)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var a="application/octet-stream"===e.type,s=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s||l)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);o?o.location=f:location.href=f,o=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,o):r)||(e.exports=a)},51619:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/campaigns/report/[campaignId]",function(){return n(76576)}])},11312:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(85893),o=n(11604),a=n(68527),i=n(79042),l=n(59876),s=n(79521),c=n(67294),u=n(92814),d=n(51436);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function x(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=c.forwardRef((function(e,t){var n=e.indeterminate,a=x(e,["indeterminate"]),i=c.useRef(),l=t||i;return c.useEffect((function(){l.current.indeterminate=n}),[l,n]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.m$.input,m({type:"checkbox",ref:l},a))})})),v=function(e){var t=e.title,n=e.columns,f=e.data,p=e.pageSize,x=e.onRowSelected,v=e.variant,b=c.useMemo((function(){return n}),[n]),y=(0,s.useTable)({columns:b,data:f,initialState:{pageIndex:0,pageSize:p}},s.useSortBy,s.usePagination,s.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,r.jsx)(o.m$.div,{justifyContent:"center",d:"flex",children:(0,r.jsx)(g,m({},t()))})},Cell:function(e){var t=e.row;return(0,r.jsx)(o.m$.div,{children:(0,r.jsx)(g,m({},t.getToggleRowSelectedProps()))})}}].concat(h(e))}))})),j=y.getTableProps,w=y.headerGroups,S=y.prepareRow,P=y.getTableBodyProps,C=y.page,O=y.canPreviousPage,k=y.canNextPage,R=y.pageOptions,A=y.nextPage,I=y.previousPage,E=y.selectedFlatRows,T=y.state.pageIndex;return c.useEffect((function(){E&&x&&"function"===typeof x&&x(E.map((function(e){return e.original})))}),[E]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.kC,{flex:1,justifyContent:"flex-end",mb:"4",mr:"8",children:[(0,r.jsx)(a.kC,{mr:"16"}),(0,r.jsx)(a.kC,{children:(0,r.jsxs)(a.xv,{fontSize:"md",children:["Total:"," ",(0,r.jsxs)(a.xv,{as:"span",fontWeight:"semibold",children:[null===f||void 0===f?void 0:f.length," ",t]})]})})]}),(0,r.jsxs)(i.iA,m({variant:v},j(),{children:[(0,r.jsx)(i.hr,{children:w.map((function(e,t){return(0,r.jsx)(i.Tr,m({},e.getHeaderGroupProps(),{children:e.headers.map((function(e,t){return(0,r.jsxs)(i.Th,m({},e.getHeaderProps(e.getSortByToggleProps()),{isNumeric:e.isNumeric,fontSize:"1rem",padding:".5rem",pr:".54rem",textTransform:"capitalize",children:[e.render("Header"),(0,r.jsx)(o.m$.span,{children:e.isSorted?e.isSortedDesc?(0,r.jsx)(l.AS,{"aria-label":"sorted descending"}):(0,r.jsx)(l.$l,{"aria-label":"sorted ascending"}):null})]}),t)}))}),t)}))}),(0,r.jsx)(i.p3,m({},P(),{children:C.map((function(e,t){return S(e),(0,r.jsx)(i.Tr,m({},e.getRowProps(),{children:e.cells.map((function(e,t){return(0,r.jsx)(i.Td,m({},e.getCellProps(),{isNumeric:e.column.isNumeric,textTransform:"capitalize",children:e.render("Cell")}),t)}))}),t)}))}))]})),(0,r.jsxs)(a.kC,{width:"full",justifyContent:"flex-end",alignItems:"center",my:8,mt:2,children:[O&&(0,r.jsx)(o.m$.button,{type:"button",onClick:function(){return I()},children:(0,r.jsx)(u.G,{icon:d.Uu6,style:{margin:"auto 10px"}})}),(0,r.jsxs)(a.xv,{fontSize:"md",mr:"6",children:["Page ",(0,r.jsx)("b",{children:T+1})," of ",R.length]}),k&&(0,r.jsx)(o.m$.button,{type:"button",onClick:function(){return A()},children:(0,r.jsx)(u.G,{icon:d.I4f,style:{margin:"auto 10px"}})})]})]})},b=v;v.defaultProps={pageSize:50};var y=b},76576:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(34051),o=n.n(r),a=n(85893),i=n(67294),l=n(11163),s=n(51273),c=n(19130),u=n(20949),d=n(28609),f=n(68527),p=n(51436),m=n(28582),x=n(92814),h=n(83814),g=n(81655),v=n(26723),b=function(e){var t=e.title,n=e.date,r=(0,u.If)().colorMode;return(0,a.jsxs)(f.kC,{justify:"space-between",mb:5,children:[(0,a.jsxs)(f.kC,{w:"75%",maxW:"fit-content",justify:"space-between",flexDir:"column",alignItems:"flex-start",children:[(0,a.jsx)(f.X6,{size:"md",children:t}),(0,a.jsx)(f.xv,{fontSize:"md",mt:"2",color:h.fq[r],children:n})]}),(0,a.jsx)(f.kC,{alignSelf:"flex-start",children:(0,a.jsxs)(g.v2,{children:[(0,a.jsx)(g.j2,{children:(0,a.jsx)(v.hU,{"aria-label":"menu options",variant:"ghost",icon:(0,a.jsx)(x.G,{color:h.fq[r],icon:p.cNd})})}),(0,a.jsxs)(g.qy,{children:[(0,a.jsx)(g.sN,{children:"Delete Widget"}),(0,a.jsx)(g.sN,{children:"Export as Email"})]})]})})]})},y=function(){var e=(0,u.If)().colorMode;return(0,a.jsxs)(f.kC,{padding:[6,8],flexDirection:"column",height:"100%",children:[(0,a.jsx)(b,{title:"Engagement Summary",date:""}),(0,a.jsx)(f.rj,{w:"100%",height:"100%",templateColumns:"repeat(4, minmax(0,1fr))",alignItems:"center",gap:4,children:[{title:"Email Sent",value:112},{title:"Skipped",value:112},{title:"Opened",value:112},{title:"Clicked",value:112},{title:"Hard Bounce",value:84},{title:"Soft Bounce",value:29},{title:"Unsubscribe",value:33},{title:"Spam",value:45},{title:"Order In",value:767},{title:"Rejected",value:21},{title:"Last Order",value:343},{title:"New Member",value:2}].map((function(t){return(0,a.jsxs)(f.xu,{p:1,py:"4",children:[(0,a.jsx)(f.xv,{fontSize:"large",fontWeight:"medium",textAlign:"center",size:"lg",children:t.value}),(0,a.jsx)(f.xv,{textAlign:"center",fontSize:"md",color:h.fq[e],children:t.title})]},t.title)}))})]})},j=n(82666),w=n(27030),S=n(11312),P=n(93162),C=n(84105);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I={fontSize:"small",fontWeight:"semibold"},E={maxW:"30rem"},T=[{Header:"Lead Id",accessor:"leadId"},{Header:"Name",accessor:"name"},{Header:"Phone",accessor:"phone"},{Header:"Affilliate",accessor:"affilliate"},{Header:"Opened On",accessor:"openedOn"},{Header:"Accepted",accessor:"accepted"},{Header:"Rejected",accessor:"rejected"},{Header:"Unsub",accessor:"unsub"},{Header:"Status",accessor:"status"}],z=function(e){var t=e.campaign,n=e.campaignReports,r=(0,l.useRouter)(),o=(0,u.If)().colorMode,s=(0,d.pm)(),c=i.useMemo((function(){return{isDisabled:!0,py:"1",maxW:"30rem",bg:h.We[o],color:h.$W[o]}}),[]),g=A(i.useState([]),2),v=g[0],b=g[1],O=function(){if(v.length<1)return s({title:"Download Error",description:"No records selected to download!",status:"error",duration:4e3,isClosable:!0,variant:"top-accent"});!function(e){var t=e.data,n=e.fileName,r={Sheets:{data:C.P6.json_to_sheet(t)},SheetNames:["data"]},o=C.cW(r,{bookType:"xlsx",type:"array"}),a=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});P.saveAs(a,n+".xlsx")}({data:v,fileName:"Quikinfluence Campaign Reports "+(new Date).toISOString()})};return t||n?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(f.kC,{flexDirection:"column",children:[(0,a.jsxs)(f.kC,{flexDir:"row",alignItems:"center",onClick:r.back,_hover:{cursor:"pointer"},children:[(0,a.jsx)(x.G,{icon:p.A35,size:"xs"}),(0,a.jsx)(f.xv,{fontWeight:"bold",pl:"2",children:"Back"})]}),(0,a.jsxs)(f.X6,{size:"md",mt:"16",children:["Campaign: ",t.name]}),(0,a.jsx)(f.kC,{flexDirection:"column",mt:"12",background:h.fP[o],borderRadius:"8px",maxW:"37rem",children:(0,a.jsx)(y,{})}),(0,a.jsxs)(f.MI,{columns:2,rowGap:"10",spacing:1,mt:"32",mb:"20",maxW:"container.sm",children:[(0,a.jsx)(f.P4,{maxW:"30rem",children:(0,a.jsx)(j.o,{type:"text",label:"Campaign Name",value:t.name,TextInputProps:R({},c),formControlProps:R({},E),labelProps:R({},I),handleChange:function(){}})}),(0,a.jsx)(f.P4,{children:(0,a.jsx)(j.o,{type:"text",label:"Campaign Start Date",value:(0,m.Z)(new Date(t.campaignDate),"dd/MM/yyyy"),TextInputProps:R({},c),formControlProps:R({},E),labelProps:R({},I),handleChange:function(){}})}),(0,a.jsx)(f.P4,{colSpan:1,children:(0,a.jsx)(w.Z,{selectProps:{name:"type",value:t.EmailSmsRecord.type,bg:h.We[o],isDisabled:!0},onChange:function(){},placeholder:t.EmailSmsRecord.type,label:"Campaign Type",labelProps:R({},I),options:[{value:t.EmailSmsRecord.type,label:t.EmailSmsRecord.type}]})}),(0,a.jsx)(f.P4,{colSpan:2,children:(0,a.jsx)(f.X6,{as:"h6",size:"lg",mt:"16",children:"Campaign Selections"})}),(0,a.jsx)(f.P4,{maxW:"30rem",children:(0,a.jsx)(j.o,{type:"text",label:"Gender",value:"Male",TextInputProps:R({},c),formControlProps:R({},E),labelProps:R({},I),handleChange:function(){}})}),(0,a.jsx)(f.P4,{maxW:"30rem",children:(0,a.jsx)(j.o,{type:"text",label:"Age",value:"10-35",TextInputProps:R({},c),formControlProps:R({},E),labelProps:R({},I),handleChange:function(){}})}),(0,a.jsxs)(f.P4,{maxW:"30rem",mt:"12",children:[(0,a.jsx)(f.xv,R({},I,{mb:"8",children:"Interest"})),(0,a.jsxs)(f.aV,{display:"flex",flexDir:"row",children:[(0,a.jsx)(f.HC,{fontSize:"lg",alignItems:"center",bg:h.yg[o],px:"5",mr:"6",h:"8",borderRadius:"xl",children:"Sports"}),(0,a.jsx)(f.HC,{fontSize:"lg",alignItems:"center",bg:h.yg[o],px:"5",mr:"6",h:"8",borderRadius:"xl",children:"TV Shows"}),(0,a.jsx)(f.HC,{fontSize:"lg",alignItems:"center",bg:h.yg[o],px:"5",mr:"6",h:"8",borderRadius:"xl",children:"Animals"})]})]}),(0,a.jsxs)(f.P4,{maxW:"30rem",mt:"12",children:[(0,a.jsx)(f.xv,R({},I,{mb:"8",children:"Locations"})),(0,a.jsxs)(f.aV,{display:"flex",flexDir:"row",children:[(0,a.jsx)(f.HC,{fontSize:"lg",alignItems:"center",bg:h.yg[o],px:"5",mr:"6",h:"8",borderRadius:"xl",children:"Georgia"}),(0,a.jsx)(f.HC,{fontSize:"lg",alignItems:"center",bg:h.yg[o],px:"5",mr:"6",h:"8",borderRadius:"xl",children:"Florida"})]})]})]}),(0,a.jsx)(f.xu,{overflowX:"auto",width:"100%",maxW:"70rem",padding:"10px 0 10px",children:!n||n.length<1?(0,a.jsx)(f.M5,{children:(0,a.jsx)(f.xv,{fontWeight:"bold",children:"Reports not available yet! Kindly check back in a few moments."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.kC,{justifyContent:"flex-end",mb:"8",children:[(0,a.jsx)(f.xv,{fontWeight:"semibold",fontSize:"2xl",onClick:O,_hover:{cursor:"pointer"},children:"Download Record List"}),(0,a.jsx)(x.G,{onClick:O,color:h.ZP.influenceRed,icon:p.W9K,style:{margin:"auto 10px"}})]}),(0,a.jsx)(S.Z,{title:"Contacts",columns:T,data:n,pageSize:12,onRowSelected:function(e){b(e)},variant:"leadTable"})]})})]})}):(0,a.jsx)(f.xu,{children:(0,a.jsx)(f.xv,{children:"Something went wrong, try again!"})})},H=n(48081);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,o)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(){var e=(0,l.useRouter)().query.campaignId,t=(0,i.useState)(!0),n=t[0],r=t[1],u=(0,i.useState)(),d=u[0],f=u[1],p=(0,i.useState)([]),m=p[0],x=p[1];(0,i.useEffect)((function(){h()}),[]);var h=function(){var t,n=(t=o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=["/users/campaign/".concat(e),"/users/campaign/".concat(e,"/reports")],t.next=4,Promise.all(n.map((function(e){return H.be.get(e)}))).then((function(e){var t=M(e,2),n=t[0].data,r=t[1].data;f(n.data),x(g(null===r||void 0===r?void 0:r.data))}));case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:return t.prev=8,r(!1),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,6,8,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){D(a,r,o,i,l,"next",e)}function l(e){D(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),g=function(e){return e?e.map((function(e){var t,n,r;return{leadId:e.lead.id,name:e.lead.firstName+" "+e.lead.lastName,phone:e.lead.phone,affilliate:"",openedOn:(0,H.yL)(null===(t=e.meta)||void 0===t?void 0:t.events),accepted:"",rejected:"",unsub:(0,H.eA)(null===(n=e.meta)||void 0===n?void 0:n.events),status:null===(r=e.meta)||void 0===r?void 0:r.status}})):[]};return n?(0,a.jsx)(s.Z,{children:(0,a.jsx)(c.gl,{})}):(0,a.jsx)(s.Z,{children:(0,a.jsx)(z,{campaign:d,campaignReports:m})})}},20067:function(){},72061:function(){}},function(e){e.O(0,[8523,2251,8527,3588,3084,3061,5715,6345,5787,6636,2429,9521,550,1273,9774,2888,179],(function(){return t=51619,e(e.s=t);var t}));var t=e.O();_N_E=t}]);